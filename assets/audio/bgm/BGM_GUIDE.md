# 🎵 BGMファイルガイド

## 📁 BGM システム概要
ゲーム内の背景音楽は完全自動化されており、シーンに応じて適切なBGMが自動再生されます。

## 🎼 必要なBGMファイル

### シーン別BGM
| シーン | ファイル名 | 雰囲気・用途 | 推奨長さ |
|--------|-----------|-------------|----------|
| **タイトル画面** | `bgm_nostalgic_summer.mp3` | 懐かしい夏の思い出、青春 | 2-3分 |
| **会話シーン** | `bgm_reunion_memories.mp3` | 久しぶりの再会、甘酸っぱい | 3-4分 |
| **ゲームバトル** | `bgm_battle_tension.mp3` | 緊張感のある野球拳バトル | 2-3分 |
| **ハッピーエンド** | `bgm_eternal_love.mp3` | 永遠の愛、感動的 | 3-4分 |
| **バッドエンド** | `bgm_melancholy_night.mp3` | 少し切ない、でも温かい | 2-3分 |
| **ローディング** | `bgm_gentle_piano.mp3` | 優しいピアノ、待機用 | 1-2分 |

### フォールバックBGM（オプション）
| ファイル名 | 用途 | 説明 |
|-----------|------|------|
| `bgm_default.mp3` | 汎用BGM | メインファイルが見つからない時 |
| `bgm_ambient.mp3` | アンビエント | 環境音的BGM |
| `bgm_peaceful.mp3` | 穏やか | 平和な雰囲気 |

## 🎨 BGMの雰囲気とテーマ

### 🌅 タイトル画面 - 懐かしい夏
- **テーマ**: 青春時代の思い出、夏の夕暮れ
- **楽器**: アコースティックギター、ピアノ、ストリングス
- **テンポ**: ゆったり（70-90 BPM）
- **キー**: 長調（明るく懐かしい）

### 💕 会話シーン - 甘酸っぱい再会
- **テーマ**: 久しぶりの再会、恋心の芽生え
- **楽器**: ピアノ、バイオリン、チェロ
- **テンポ**: ミディアム（90-110 BPM）
- **キー**: 長調から短調への転調あり

### ⚡ ゲームバトル - ドキドキの勝負
- **テーマ**: 緊張感、期待感、わくわく
- **楽器**: シンセサイザー、ドラム、ベース
- **テンポ**: アップビート（110-130 BPM）
- **キー**: 短調（緊張感）

### 🌟 ハッピーエンド - 永遠の愛
- **テーマ**: 愛の成就、感動、希望
- **楽器**: オーケストラ、合唱
- **テンポ**: グランディオーソ（90-120 BPM）
- **キー**: 長調（輝かしい）

### 🌙 バッドエンド - 切ない夜
- **テーマ**: 少しの寂しさ、でも温かい思い出
- **楽器**: ピアノ、ストリングス
- **テンポ**: スロー（60-80 BPM）
- **キー**: 短調（切ない）

### 🎹 ローディング - 優しい時間
- **テーマ**: 待機時間、リラックス
- **楽器**: ソロピアノまたは室内楽
- **テンポ**: 自由（リラックス）
- **キー**: 長調（穏やか）

## 🔧 技術仕様

### ファイル形式
- **推奨**: MP3 (128kbps - 320kbps)
- **対応**: WAV, OGG, M4A
- **サンプリングレート**: 44.1kHz
- **チャンネル**: ステレオ

### ループ設定
- **自動ループ**: すべてのBGMは自動でループ再生
- **フェード機能**: 2秒間のクロスフェード
- **音量**: 自動調整（BGM音量設定に従う）

### ファイル配置
```
assets/audio/bgm/
├── bgm_nostalgic_summer.mp3     # タイトル画面
├── bgm_reunion_memories.mp3     # 会話シーン
├── bgm_battle_tension.mp3       # ゲームバトル
├── bgm_eternal_love.mp3         # ハッピーエンド
├── bgm_melancholy_night.mp3     # バッドエンド
├── bgm_gentle_piano.mp3         # ローディング
├── bgm_default.mp3              # フォールバック
├── bgm_ambient.mp3              # フォールバック
└── bgm_peaceful.mp3             # フォールバック
```

## ⚙️ システム機能

### 🔄 自動BGM切り替え
```javascript
// シーン変更時に自動でBGMが切り替わります
this.game.audioManager.playSceneBGM('title', 2.0);
```

### 🎛️ スマートフォールバック
1. 指定されたBGMファイルを試行
2. ファイルが見つからない場合、フォールバックBGMを試行
3. すべて失敗した場合、無音で継続（エラーでゲームは止まらない）

### 🔊 音量管理
- BGM音量は設定画面で調整可能
- マスター音量との連動
- リアルタイム音量変更対応

## 🎭 シーン別実装状況

### ✅ 実装済み
- **タイトル画面**: 自動BGM再生
- **会話シーン**: 自動BGM再生 + CSV個別設定対応
- **ゲームシーン**: 自動BGM再生
- **エンディング**: true/bad別BGM再生
- **ローディング**: 初期化時BGM再生

### 🎵 BGM再生タイミング
- **ゲーム起動時**: ローディングBGM
- **タイトル表示時**: タイトルBGM（2秒フェード）
- **会話開始時**: 会話BGM（2秒フェード）
- **バトル開始時**: バトルBGM（1.5秒フェード）
- **エンディング時**: エンディングBGM（2秒フェード）

## 🎼 おすすめBGM素材サイト

### フリー素材
- **DOVA-SYNDROME**: https://dova-s.jp/
- **魔王魂**: https://maou.audio/
- **甘茶の音楽工房**: https://amachamusic.chagasi.com/

### 有料素材
- **AudioJungle**: https://audiojungle.net/
- **Pond5**: https://www.pond5.com/
- **PremiumBeat**: https://www.premiumbeat.com/

## 🔧 カスタマイズ

### BGMファイルの追加
1. MP3ファイルを`assets/audio/bgm/`に配置
2. 適切なファイル名に変更
3. ゲーム再起動で自動認識

### 新しいシーンBGMの追加
AudioManager.jsの`playSceneBGM()`メソッドの`bgmMap`に追加:
```javascript
const bgmMap = {
    'title': 'bgm_nostalgic_summer.mp3',
    'new_scene': 'bgm_new_scene.mp3'  // 新しいシーン
};
```

---

**🎵 すべてのBGMが揃うと、より没入感のあるゲーム体験を提供できます！**