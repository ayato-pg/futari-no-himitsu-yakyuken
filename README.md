# 2人の秘密、野球拳。

## 🎮 プロジェクト概要
「2人の秘密、野球拳。」は、幼馴染のお姉さん「美咲」との再会と、思い出の野球拳を通じて特別な感情を確かめ合うビジュアルノベル＋じゃんけんバトルゲームです。

- **タイトル**: 2人の秘密、野球拳。
- **ジャンル**: ビジュアルノベル＋じゃんけんバトル
- **プラットフォーム**: Electron（Windows/Mac/Linux対応）
- **想定プレイ時間**: 15-20分（1周）
- **対象年齢**: 18歳以上（非アダルト）

### ゲームの流れ
```
TITLE → DIALOGUE → JANKEN_BATTLE → TRUE_END/BAD_END
```

### 勝利条件
- **TRUE END**: プレイヤーが5勝先取
- **BAD END**: 美咲が5勝先取

## 🚀 クイックスタート

### 前提条件
- Node.js 16以上
- npm

### インストール・起動
```bash
# 依存関係をインストール
npm install

# ゲームを開始
npm start

# 開発モード（開発者ツール付き）
npm run dev
```

## 📁 プロジェクト構造

```
2人の秘密、野球拳。/
├── main.js                 # Electronメインプロセス
├── index.html              # エントリーポイント
├── package.json            # プロジェクト設定
├── src/
│   ├── game.js            # ゲームメインロジック
│   ├── scenes/            # シーン管理
│   │   ├── TitleScene.js
│   │   ├── DialogueScene.js
│   │   ├── GameScene.js
│   │   └── EndingScene.js
│   ├── systems/           # 各種システム
│   │   ├── CSVLoader.js
│   │   ├── SaveSystem.js
│   │   ├── AudioManager.js
│   │   └── CostumeSystem.js
│   └── styles/
│       └── main.css       # メインスタイル
├── assets/
│   ├── images/            # 画像素材
│   ├── audio/            # 音声素材
│   └── data/
│       └── csv/          # ゲームデータ（17個のCSVファイル）
└── README.md
```

## 🎨 特徴的なシステム

### 1. CSV完全外部管理システム
- 全ゲームデータをBOM付きUTF-8のCSVで管理
- Excelで直接編集可能
- プログラム変更なしでゲーム内容を調整

### 2. 美咲の5段階衣装システム
1. **OLスーツ** (HP5)
2. **カジュアル服** (HP4)
3. **大人の部屋着** (HP3)
4. **キャミソール** (HP2)
5. **バスタオル** (HP1)

### 3. じゃんけんAIシステム
- ラウンドごとに難易度が上昇
- プレイヤーのパターンを学習
- 必殺技「読心術」（3連勝で発動）

## 📊 CSVデータファイル一覧

1. **scenes.csv** - シーン情報
2. **characters.csv** - キャラクター設定
3. **dialogues.csv** - 会話データ
4. **misaki_costumes.csv** - 美咲の衣装データ
5. **endings.csv** - エンディング情報
6. **ui_elements.csv** - UI要素
7. **ui_panels.csv** - UIパネル
8. **ui_icons.csv** - アイコン
9. **click_areas.csv** - クリック領域
10. **ui_animations.csv** - アニメーション
11. **ui_fonts.csv** - フォント設定
12. **ui_responsive.csv** - レスポンシブ設定
13. **game_balance.csv** - ゲームバランス
14. **sound_effects.csv** - 効果音
15. **janken_patterns.csv** - じゃんけんAIパターン
16. **misaki_reactions.csv** - 美咲の反応
17. **save_data_structure.csv** - セーブデータ構造
18. **how_to_play.csv** - 遊び方説明データ
19. **bgm_settings.csv** - BGM設定（統合管理）
20. **gallery_images.csv** - ギャラリー画像データ

## 🎯 操作方法

### タイトル画面
- **はじめる**: 新しいゲームを開始
- **遊び方**: ゲームルールと操作方法の説明
- **ギャラリー**: 収集した立ち絵を閲覧（勝利で解放）
- **設定**: 音量調整とゲーム設定

### じゃんけんバトル
- **R/1**: グー
- **S/2**: チョキ  
- **P/3**: パー
- **Q**: 必殺技（3連勝後）
- **H**: ヒント

### グローバル操作
- **F11**: フルスクリーン切り替え
- **Ctrl+M**: ミュート切り替え

## 🔧 開発・カスタマイズ

### 画像素材の追加
画像ファイルを以下のディレクトリに配置:
```
assets/images/
├── backgrounds/     # 背景画像 (1920x1080)
├── characters/      # キャラクター画像 (透明背景PNG)
├── ui/             # UI画像 (60x60程度)
└── cg/             # エンディングCG (800x600)
```

### 音声素材の追加
音声ファイルを以下のディレクトリに配置:
```
assets/audio/
├── bgm/    # BGM (OGGループ対応推奨)
├── se/     # 効果音 (MP3)
└── voice/  # ボイス (MP3)
```

### CSVデータの編集
- `assets/data/csv/` 内のCSVファイルをExcelで編集
- **重要**: BOM付きUTF-8で保存すること
- ゲーム再起動で変更が反映される

#### 遊び方説明の編集
`how_to_play.csv` を編集して説明文をカスタマイズ:
```csv
section_id,title,content,icon,display_order
about,ゲームについて,"説明文...",📖,1
rules,野球拳のルール,"<ul><li>...</li></ul>",✊,2
```

## 🐛 トラブルシューティング

### ゲームが起動しない
```bash
# Node.jsのバージョン確認
node --version  # v16以上必要

# 依存関係の再インストール
rm -rf node_modules
npm install
```

### 文字化けする場合
- CSVファイルをBOM付きUTF-8で保存しているか確認
- Excelで開く場合は「データ」→「テキストファイル」→「UTF-8」を選択

### 画像が表示されない
- ファイルパスが正しいか確認
- 画像ファイルが存在するか確認
- プレースホルダー機能があるため、画像なしでも動作します

## 📝 ライセンス

MIT License

## 👨‍💻 開発情報

- **開発環境**: Electron 27.0.0
- **言語**: JavaScript (ES6+), HTML5, CSS3
- **データ形式**: CSV (BOM付きUTF-8)
- **開発者**: Claude Code

## 🎉 アップデート履歴

### v2.8.0 (2025-09-14) - ギャラリーシステム完全実装
- **新機能**: ギャラリーシステム実装（立ち絵収集・表示・管理）
- **新機能**: JavaScriptベースCSV管理システム（CORS問題解決）
- **新機能**: バトル進行に連動したギャラリー画像自動解放機能
- **改善**: BGM統合管理システム実装
- **改善**: CSVLoader強化（エンコーディング対応・デバッグ機能）
- **改善**: SaveSystem拡張（ギャラリーデータ管理・リセット機能）
- **改善**: エラーハンドリング強化（画像読み込み・CSV処理）
- **整理**: 不要BGMファイル削除、新規BGMファイル追加

### v2.7.0 - 統一クリック音システム完全実装
### v2.6.0 - エンディングトーク直接アクセス＆CSV管理システム実装  
### v2.5.0 - BAD ENDビジュアルシステム完全実装
### v2.4.0 - エンディングトーク完全システム実装

## 🎯 今後の拡張予定

- [x] ~~ギャラリー機能の実装~~
- [x] ~~遊び方説明システム（CSV管理）~~
- [x] ~~プロフェッショナルなタイトルアニメーション~~
- [x] ~~美咲フェードイン演出~~
- [x] ~~CSV統合管理システム~~
- [ ] 複数エンディングの追加  
- [ ] 音声アニメーション同期
- [ ] Steam配信対応
- [ ] マルチ言語対応

---

**プレイしてお楽しみください！** ❤️